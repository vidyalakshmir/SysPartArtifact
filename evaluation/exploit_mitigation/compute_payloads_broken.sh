#!/bin/bash


file=$1
app_folder=$2
while read -r line
do
	payload=$(echo $line | awk {'print $1'})
	for appfile in ${app_folder}/*
	do

		appname=$(basename $appfile)
		entry=0
		#printf "\n%s\t%s\t" $payload ${appname%.*}
		i=0
		for word in $line
		do
			if [[ i -ne 0 ]]
			then
				#echo $appfile
				#echo $word
				rt=$(grep -w $word $appfile | wc -l)
				if [[ rt -gt 0 ]]
				then
					if [[ entry -eq 0 ]]
					then
						printf "\n%s\t%s\t" $payload ${appname%.*}
					fi
					printf "%s\t" $word
					entry=1
				fi
			fi
			i=$((i+1))
		done
	done
done < $file
printf "\n"
