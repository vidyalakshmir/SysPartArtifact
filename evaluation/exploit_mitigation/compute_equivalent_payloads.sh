#!/bin/bash


file=$1
eqfile="equivalent_list.txt"
app_folder=$2
while read -r line
do
	i=0
	notfiltered=0
	payload=""
	appname=""
	ifeq=0
	for word in $line
	do
		if [[ i -eq 0 ]]
		then 
			payload=$word
		elif [[ i -eq 1 ]]
		then
			appname=$word 
		else 
			appfile=$app_folder/$appname.txt
			#echo $appfile
			ls=$(grep -w $word $eqfile)
			for l in $ls 
			do
				ifeq=1
				rt=$(grep -w $l $appfile | wc -l)
				if [[ rt -gt 0 ]]
				then 
					continue
				else 
					notfiltered=1
				fi
			done 
		fi
		i=$((i+1))
	done
	if [[ ifeq -eq 0 ]]
	then
		printf "\n%s %s NOEQ" $payload $appname 
	else 
		printf "\n%s %s EQ" $payload $appname 
	fi 
done < $file